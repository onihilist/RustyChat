1. passez les protocols dans un switch case au lieu de "if" à la con DES DEUX COTES
2. utiliser les utils pour les response des deux côtés
3. Thearding pour le client handler